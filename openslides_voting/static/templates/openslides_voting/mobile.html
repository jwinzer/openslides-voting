<style type="text/css">
  #nav, #sidebar, #messaging, .title span {
    /* Hide nav, sidebar, messaging, title */
    display: none !important;
  }
  #content .col1.sidebar-min {
    width: 100%;
  }
  @media only screen and (max-width: 767px) {
    body {
      font-size: 16px;
    }
    h1 {
      font-size: 20px;
      padding: 0;
      margin: 5px 0;
    }
    #nav .containerOS, #content .containerOS {
      padding: 0 10px;
    }
    #content {
      margin-top: 10px;
    }
    #content .col1 .title {
      padding: 0 5px;
    }
    #content .col1 .details {
      padding: 5px;
      margin-top: 7px;
    }
    #chatbox {
      width: 80%;
    }
    .header {
      max-height: 34px;
      white-space: nowrap;
      overflow: hidden;
    }
    .details {
      height: calc(100vh - 250px);  /* 210 */
      overflow-y: scroll;
    }
  }
</style>

<div class="header">
  <div class="title">
    <h1>{{ title | translate }}</h1>
  </div>
</div>

<div class="details">
    <style type="text/css">
      .option {
        padding: 8px 6px;
      }
      @media only screen and (max-width: 767px) {
        .center {
          margin: auto;
          width: 80%;
          text-align: center;
        }
        .center-block {
          padding: 30px 0;
          text-align: center;
        }
      }
      .spacer-top {
        margin-top: 15px;
      }
      .spacer-bottom {
        margin-bottom: 35px;
      }
    </style>

  <!-- Detail view 1: Motion or topic text. -->
  <div ng-if="!vote && !canVote && (!poll || !poll.has_votes)" ng-bind-html="text | translate"></div>

  <!-- Detail view 2: Vote casted. -->
  <div ng-if="vote && poll && !poll.has_votes" class="center-block">
    <translate>Your vote has been counted.<br/>You have voted</translate>
    <h2 class="spacer-top"><strong>{{ vote | translate }}</strong></h2>
  </div>

  <ng-include src="'static/templates/openslides_voting/submit-buttons-css.html'"></ng-include>

  <!-- Detail view 3: Vote submit form. -->
  <div ng-if="canVote && !vote">
    <div class="pointer option" ng-click="select('Yes');">
      <button type="button" class="btn btn-default btn-voting btn-voting-xs btn-yes">
        <i class="fa fa-thumbs-o-up fa-2x"></i>
      </button>
      <translate>Yes</translate>
    </div>

    <div class="pointer option" ng-click="select('No');">
      <button type="button" class="btn btn-default btn-voting-xs btn-no">
        <i class="fa fa-thumbs-o-down fa-2x"></i>
      </button>
      <translate>No</translate>
    </div>

    <div class="pointer option spacer-bottom" ng-click="select('Abstain');">
      <button type="button" class="btn btn-default btn-voting-xs btn-abstain">
        <i class="fa fa-circle-o fa-2x"></i>
      </button>
      <translate>Abstain</translate>
    </div>

    <div ng-if="!selection.value" class="sp center bold text-danger" translate>
      Please vote now!
    </div>

    <div ng-if="selection.value" class="center bold">
      <translate>Your current choice:</translate> {{ selection.display | translate }}
      <div class="center">
        <button ng-disabled="selection.submitted"
          type="button" class="btn btn-primary spacer-top" ng-click="submitVote()" translate>
          Submit
        </button>
        </div>
    </div>
  </div>

  <!-- Detail view 4: Voting result. -->
  <table ng-if="poll.has_votes">
    <style type="text/css">
      td {
        padding: 6px;
      }
      td.bold {
        font-weight: bold;
        text-align: left;
      }
      td.chart {
        width: 400px;
      }
      td.chart .progress {
        margin-bottom: 4px;
      }
      @media only screen and (max-width: 767px) {
        td.chart {
          width: 100%;
        }
      }
    </style>
    <tr>
      <td>
        <button type="button" class="btn btn-default btn-voting-xs btn-yes">
          <i class="fa fa-thumbs-o-up fa-2x"></i>
        </button>
      <td class="bold chart">
        <translate>Yes</translate>: {{ poll.yes | number:votesPrecision }}
        <span ng-if="poll.getVote(poll.yes, 'yes').percentNumber">
          {{ poll.getVote(poll.yes, 'yes').percentStr || '&nbsp;' }}
        </span>
        <div ng-if="poll.getVote(poll.yes, 'yes').percentNumber">
          <uib-progressbar value="poll.getVote(poll.yes, 'yes').percentNumber" type="success"></uib-progressbar>
        </div>

    <tr>
      <td>
        <button type="button" class="btn btn-default btn-voting-xs btn-no">
          <i class="fa fa-thumbs-o-down fa-2x"></i>
        </button>
      <td class="bold chart">
        <translate>No</translate>: {{ poll.no | number:votesPrecision }}
        <span ng-if="poll.getVote(poll.no, 'no').percentNumber">
          {{ poll.getVote(poll.no, 'no').percentStr || '&nbsp;' }}
        </span>
        <div ng-if="poll.getVote(poll.no, 'no').percentNumber">
          <uib-progressbar value="poll.getVote(poll.no, 'no').percentNumber" type="danger"></uib-progressbar>
        </div>

    <tr>
      <td>
        <button type="button" class="btn btn-default btn-voting-xs btn-abstain">
          <i class="fa fa-circle-o fa-2x"></i>
        </button>
      <td class="bold chart">
        <translate>Abstain</translate>: {{ poll.abstain | number:votesPrecision }}
        <span ng-if="poll.getVote(poll.abstain, 'abstain').percentNumber">
          {{ poll.getVote(poll.abstain, 'abstain').percentStr || '&nbsp;' }}
        </span>
        <div ng-if="poll.getVote(poll.abstain, 'abstain').percentNumber">
          <uib-progressbar value="poll.getVote(poll.abstain, 'abstain').percentNumber" type="warning"></uib-progressbar>
        </div>

      <tr>
        <td colspan="2" class="bold">
          <translate>Valid votes</translate>: {{ poll.votesvalid | number:votesPrecision }}
          {{ poll.getVote(poll.votesvalid, 'votesvalid').percentStr }}

      <tr>
        <td colspan="2">
          <span class="text-success" ng-if="quorum >= 0" translate>
            Quorum ({{ (poll.yes - quorum) | number:votesPrecision }}) reached.
          </span>
          <span class="text-danger" ng-if="quorum < 0" translate>
            Quorum ({{ (poll.yes - quorum) | number:votesPrecision }}) not reached.
         </span>


    </table>
</div>

<div os-perms="agenda.can_be_speaker" ng-show="!isStartPage" class="spacer-top">
  <button ng-if="!speakerPos" ng-disabled="!speakerListOpen" ng-click="addSpeaker()"
    type="button" class="btn btn-success pull-right">
    <i class="fa fa-microphone fa-lg"></i>
    <translate>Add me to speakers</translate>
  </button>

  <span ng-if="speakerPos">{{ speakerPos }}. <translate>Speaker</translate></span>
  <span ng-if="!speakerPos">--</span>

  <button ng-if="speakerPos" ng-disabled="!speakerListOpen" ng-click="removeSpeaker()"
    type="button" class="btn btn-danger pull-right">
    <i class="fa fa-microphone-slash fa-lg"></i>
    <translate>Remove me from speakers</translate>
  </button>
</div>
